D1: 可扩展性与性能 (Scalability & Performance)

## **核心概念定义**

在数据库领域，可扩展性和性能是衡量其工业级能力的两把核心标尺。

- **可扩展性 (Scalability):** 指系统在应对日益增长的数据量和请求负载时，维持其性能水平的能力。
    - **类比：** 就像一个**物流仓库**。当货物（数据量）从1万件增加到1亿件时，仓库系统是否还能快速找到并取出任何一件货物？当取货订单（请求负载）从每小时100单增加到1万单时，系统是否会崩溃？
- **性能 (Performance):** 主要通过两个相反但相关的指标来衡量。
    - **延迟 (Latency):** 完成单次操作所需的时间。目标是**越低越好**。
    - **吞吐量 (Throughput / QPS):** 单位时间内能够完成的操作次数。目标是**越高越好**。

## **关键性能指标详解**

- **延迟 (Latency):** 对于RAG系统，查询延迟是用户体验的生命线。通常关注p95或p99延迟，即95%或99%的查询请求都能在这个时间内完成。一个好的在线RAG系统，其端到端（从用户提问到返回答案）的p95延迟应力求控制在2-3秒以内，而其中向量数据库的查询延迟应在50毫秒以内。
- **每秒查询数 (QPS - Queries Per Second):** 这衡量了系统的处理能力上限。它决定了你的RAG应用能同时为多少用户提供服务。

## **扩展性模式**

- **垂直扩展 (Vertical Scaling):**
    - **说明：** 增加单台服务器的资源，如更强的CPU、更大的内存、更快的硬盘。
    - **类比：** 给你的**一位**仓库管理员配备一辆更快的叉车和一台超级电脑。
    - **缺点：** 存在物理上限，且成本效益递减。
- **水平扩展 (Horizontal Scaling):**
    - **说明：** 增加更多的服务器实例来分担负载。这是现代云原生数据库的主流扩展方式。
    - **类比：** 招聘**更多**的仓库管理员，每人负责仓库的一个区域。
    - **优点：** 理论上可以无限扩展，成本效益更佳。