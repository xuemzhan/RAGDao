# D6：更新与维护

## **向量数据库的更新挑战**

ANN索引（特别是HNSW这样的图结构）是为快速查询而优化的，其内部结构紧密耦合。频繁地在图中添加或删除节点（向量），就像在已经建好的高速公路网中频繁地新增或拆除立交桥一样，代价高昂且容易破坏整体结构。

## **常见策略**

- **增量更新与软删除 (Soft Deletes):**
    - **说明：** 对于删除操作，大多数数据库并不立即从索引中移除向量，而是将其**标记为“已删除”**，在查询结果返回前将其过滤掉。
    - **类比：** 就像在通讯录里拉黑一个人，他的信息还在，但你打电话时会自动忽略他。
- **定期重建与优化 (Re-indexing & Optimization):**
    - **说明：** 当软删除的向量过多，或大量更新导致索引性能下降时，需要进行索引的重建或优化。
    - **类比：** 就像**电脑磁盘碎片整理**。定期运行优化任务，可以清理掉无用的空间，重新组织数据，使其排列更紧凑，从而恢复查询性能。