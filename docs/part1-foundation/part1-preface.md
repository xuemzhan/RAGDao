# 卷首语　写在 Part I 最前面的一页（请一定印成整页跨栏，拉页彩插）

这些年，我亲手见证并“埋葬”过不少耗资巨大的 RAG 项目，  
有的烧掉了几千万，有的投入已经到上亿元。  
真正死在模型本身问题上的，其实只是少数——  
**绝大多数都倒在了 Part I。**

有的买了 8×H100、上了 Llama-405B，却把年报页眉页脚当正文；  
有的请了数十人的标注团队，却用 512 字符硬切把一张财务表格切成三段；  
有的自研了看上去“最强”的重排模型，却因为一个全角空格，让 70B 大模型彻底聋瞎；  
还有的号称“多模态 RAG”，但把第 38 页的关键趋势图直接扔进了垃圾桶。  

我见过以千万计的预算打了水漂，以亿计的客户价值从指缝溜走，  
也见过整支团队通宵加班，只为抢救一个被切碎的公式。  
而所有这些灾难，追根溯源，都发生在用户按下“搜索”按钮之前的那 0.3 秒——  
也就是 Part I 里，那些被大多数团队忽略的地基代码与数据决策。

如果你正在负责一个 RAG 系统，那么 Part I 关心的是：  
在任何检索、重排、多轮对话、工具调用之前，你的**数据与索引**是否可靠到足以托住后面的一切——  
- 文档是怎么被加载、切碎、标好“身份证”的？  
- 嵌入之前，所有看不见的脏东西是否已经被请出场？  
- 当你说“这是一个多模态 RAG”时，那些表格、图片、公式、PDF 扫描件是真的能被模型看见、理解、召回的吗？

这也是这四章存在的理由。

- 第 1 章讲的是「从混沌到秩序」：如何把几万份 PDF、Word、网页和扫描件，老老实实变成**可控、可重放的原材料**；  
- 第 2 章讲的是「分块的艺术」：为什么“按 512 字符硬切”几乎等于在知识库里放地雷，以及如何用标题、结构和语义，切出真正贴合业务问题的块；  
- 第 3 章讲的是「元数据身份证」：一套能支撑向量检索从“勉强能用”到“稳定 90%+”的标签体系，让每一块内容都有清晰的来源、版本、时效和权限；  
- 第 4 章讲的是「文本预处理与标准化」：那把显微镜级的手术刀，专门对付全角空格、零宽字符、乱码、混语种和各种“看不见却能毁掉召回率”的细节。

如果只用三句话概括 Part I，你可以这样理解：

1. 它帮你把“脏 PDF → 可检索向量块”的**全链路决策**都梳理清楚；  
2. 它给出了一套在大厂/独角兽项目里被反复验证过的**实战默认方案**（包括失败教训和取舍边界）；  
3. 它提供的是**能直接落地的工程清单**——每一章最后的 checklist，都可以拿去对照你现有的 RAG 流水线，一条一条打勾。

这不是一本教你“如何选模型”的书。  
至少在 Part I，我几乎不讨论参数量、架构、SFT 和 RLHF。  
因为在 2025 年之后，RAG 项目的成败，往往先输在**地基没打好**——  
数据脏、索引乱、分块瞎、元数据缺、清洗弱，任何一个环节掉链子，后面的所有“模型堆叠”都是空中楼阁。

所以，这部分我写给三类人看：

- 写给那个已经背过所有大模型名字，却还在被“为什么搜索不到正确答案”追着问责的你；  
- 写给那个手里攥着几万份合约、年报、工艺规范，却始终不敢放心交给模型“随便问”的你；  
- 也写给那个要为“上亿预算的 AI 项目”背书的你——你需要一套能和 CFO、CIO、业务负责人讲清楚的**地基方法论**，而不是几张炫酷的架构图。

读完 Part I，你至少应该做到两件事：

- 能画出你们自己版本的「RAG 地基总图」——从文档入库、ETL、chunk、embedding、索引构建，到监控和回滚，每一步为什么这么设计，你都说得明白；  
- 能在下一次项目评审会上，坦然地说出：“我们愿意为 Part I 多花大约 30% 的时间，因为这会帮我们少踩绝大多数本可以避免的坑。”

2025 年，RAG 的战争，早已不只是在模型，而是在地基。  
地基不牢，再大的模型也是空中楼阁。

你愿意让你的 RAG 系统成为下一批被悄悄埋掉的项目之一，  
还是愿意让它站在 2025 年行业里最硬核的一块地基之上，  
稳稳撑住接下来所有的想象力？

翻开下一页，  
我们开始动工。

—— 写给所有不愿重蹈覆辙的你  
2025 年 6 月 1 日　于福建·宁德
